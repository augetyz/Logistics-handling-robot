# 2023年中国大学生工程实践与创新能力大赛方案记录

## 任务目标

 1. 扫描二维码
 2. 平面移动定位
 3. 拿取物料
 4. 放置物料
 5. 码垛

### 扫描二维码方案

两种思路

#### 1. 使用二维码扫描模块直接扫描。

![GM65](https://biubiu-1319563496.cos.ap-nanjing.myqcloud.com/markdown_img/1703076883875.png)

**优点**：

 - 方便
 - 使用简单
 - 只要在合适角度，扫描稳定
 - 数据简单
 - 扫描距离远

**缺点**

 - 慢
 - 扫描角度小
 - 需要占用一个串口
 - 必须要停下来扫描，行走扫描不一定能扫的到

#### 2.使用K210或者openmv之类的视觉模组

![V831](https://biubiu-1319563496.cos.ap-nanjing.myqcloud.com/markdown_img/1703077103725.png)

**优点**

 - 可编程，可控性强
 - 可视角度大，可以换镜头
 - 识别速度快，可以跑着扫描
 - 可扩展其他功能，不仅用来扫二维码

**缺点**

 - 贵
 - 可能会出问题，不稳定
 - 需要自己写代码
 - 其实没啥缺点

#### 总结

使用啥都行，只要会用。我们队采用的是GM65-二维码扫描模块，稳定，容易更换，排错误，出问题，基本不会去查看该模块的问题。唯一的地方就是，在二维码识别那里，比别的队慢2s，因为我们车车需要停下来扫描。我建议，如果没有别的需求，还是采用GM65就行，如果对自己实力比较有信心，代码稳定，图快的话，可以采用V831或者树莓派。

### 平面移动方案 

![初赛场地](https://biubiu-1319563496.cos.ap-nanjing.myqcloud.com/markdown_img/1703077532860.png)

![决赛场地](https://biubiu-1319563496.cos.ap-nanjing.myqcloud.com/markdown_img/1703077562386.png)

两个场地的运动方向是相反的，具体可以看规则——即在决赛需要在五个小时内写一套新的定位移动代码；

比赛场地是分很多个区域的，如果不能准确到达每个区域，就不能得分，甚至会因为碰到黄色区域导致比赛提前结束。

所以，在这个比赛中，最重要的就是平面移动和精确定位，车车跑得快，车车跑的准，才能算好。这里我们团队采用的思路是，底盘运动控制粗略定位，视觉识别精确定位。


#### 底盘运动控制粗略定位

这里直接使用编码器记录车车行走的距离，配合陀螺仪，实现定向定距离移动，考虑到场地打滑，机械结构误差，编码器误差累计等多种影响因素，这种方法会在多次移动、刹车、拐弯之后，出现较大误差；在短距离移动中，使用这种定位方式，可以达到1cm的定位精度，在刹车、拐弯、起步大概5-8次之后，会出现较大误差，不能保证重复定位精度，所以单纯依靠这种方法是行不通的，需要配合视觉定位实现精确定位和累计误差消除。

##### 底盘电机
底盘电机有多重选择

 - 直流有刷电机
 - 直流步进电机
 - 无刷伺服电机

我们队采用的方案是：直流有刷电机+齿轮减速器+光电型编码器

看到国赛场上大部分队采用的都是：步进电机+磁编码器+FOC闭环控制器

几乎没看到有用无刷电机的。

各个选择的个人看法：

###### 直流有刷电机

![直流光电编码器有刷减速电机](https://biubiu-1319563496.cos.ap-nanjing.myqcloud.com/markdown_img/1703079260948.png)
**优点**

 - 便宜
 - 控制简单
 - 容易更换
 - 刚入门学习用的多
 - 上手快
 - 配合高精度光电编码器，定位精度还行

**缺点**

 - 精度不够，空程大
 - 建议采用行星减速器
 - 采用的是电压控制速度，在低速情况下，不能稳定控制扭矩，导致扭矩不够，精度低
  
 我们队用这种电机全然因为是代码更迭下来一直用的是这种电机，代码不好改，或者说是懒，后面用了别的方法来弥补这种电机导致的精度不够，强烈建议使用行星减速器，但最好不要用直流有刷电机，因为这个电机有个致命问题，这个电机是采用降低电压也就是减低功率来减低转速的，在需要低速的情况下，电机扭矩会不够，导致运行不稳定！非常坑！
 

###### 步进电机
![步进电机+闭环驱动器](https://biubiu-1319563496.cos.ap-nanjing.myqcloud.com/markdown_img/1703079305093.png)
**优点**
 - 便宜
 - 控制简单
 - 进度高
 - 高速也还行，能跑的蛮快的

**缺点**

 - 高速状态下会丢步
 - 比较重
 - 别的也没啥

相当建议采用步进电机，然后配合张大头的步进电机闭环驱动器，可以实现简单控制，稳定控制，精确控制。国赛上好多人用这个方案，连PID都不用写了。
这里需要提到一个点，就是步进电机在使用时，功率是恒定的，高速和低速情况下，功率都差不多，可以解决有刷电机的低速下扭矩不够的问题，但步进电机在高速下可能会丢步，所以需要采用磁编码器来实现闭环。一般买的闭环驱动器上都会有磁编码器，和电流闭环。所以用步进电机就会很简单，实际操作起来效果也会很好。

###### 无刷电机
![无刷关节电机](https://biubiu-1319563496.cos.ap-nanjing.myqcloud.com/markdown_img/1703079360075.png)
**优点**
 - 稳定
 - 准
 - 速度快
 - 劲大
 - 好用

**缺点**


 - 贵
 - 对嵌入式电控选手要求有点高，得会用
 - 如果直接上了伺服电机（驱动一体的那种）上一个选项可以忽略

建议采用无刷电机，真的好用，刹车快，起步快，配合FOC驱动器，嘎嘎好用，换向丝滑，学会使用了连机械臂也解决了。而且这玩意还准！

唯一的问题就是贵，一个电机大概499，好一点的随便上千，有钱的真的可以试试。


##### 总结
有钱的就整无刷电机，没钱的就整步进电机，嫌自己事情少的，就整有刷电机。


### 机械臂

今年看到好多升降式的机械臂，很准，但我们队没用，原因是不知道在哪买，自己搭时间成本又有点高

于是沿用之前的方案，采用舵机驱动，3D打印，CNC连杆

![连杆式](https://biubiu-1319563496.cos.ap-nanjing.myqcloud.com/markdown_img/1703080225272.png)

![多自由度式](https://biubiu-1319563496.cos.ap-nanjing.myqcloud.com/markdown_img/1703080244601.png)

省赛用的是第二种，国赛用的是第一种，只是机械结构类似。用了机械臂逆运动学解算，算出色环坐标之后，直接转化为舵机角度放置。

## 总结

总体方案到这里就差不多了，每个环节的具体内容后面会再写的。

